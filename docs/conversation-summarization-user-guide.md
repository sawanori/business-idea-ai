# 会話要約機能 - ユーザーガイド

**ビジネスアイデア壁打ちAI - AI要約機能**

---

## 概要

長い会話をAIが自動的に要約し、Obsidianに簡潔な形で保存できる機能です。

---

## この機能が必要な理由

### 問題
- 長い会話をそのままObsidianに保存しようとすると、URIの長さ制限により保存できない
- 長い会話を手動で要約するのは時間がかかる
- 重要なポイントを見逃す可能性がある

### 解決策
- AIが自動的に会話を要約
- 重要なビジネスアイデアのポイントを抽出
- キーワードを自動的にObsidianリンク形式に変換
- 1000文字以内の簡潔な要約に整理

---

## 使い方

### パターン1: 自動要約提案（推奨）

長い会話の場合、自動的に要約が提案されます。

**手順**:

1. **会話を行う**
   - AIとビジネスアイデアについて対話する
   - 長い会話（URI制限を超える長さ）になる

2. **保存を試みる**
   - 「Obsidianに保存」ボタンをクリック

3. **要約確認ダイアログが表示される**
   ```
   ⚠️ コンテンツが長すぎてObsidianに直接保存できません（5234文字）

   [AIで要約して保存] [ダウンロード] [キャンセル]
   ```

4. **「AIで要約して保存」をクリック**
   - AIが会話を要約開始
   - "会話を要約中..." と表示される
   - 数秒待つ

5. **要約結果をプレビュー**
   - プレビューモーダルが表示される
   - 要約内容を確認

6. **保存**
   - 「保存」ボタンをクリック
   - Obsidianで開かれる

---

### パターン2: 手動で要約（任意の長さで使用可能）

コンテンツの長さに関わらず、手動で要約できます。

**手順**:

1. **オプションメニューを開く**
   - 保存ボタン横の三点アイコンをクリック

2. **「AIで要約して保存」をクリック**
   - 青いボタンが表示される

3. **要約実行**
   - AIが会話を要約
   - プレビューで確認
   - 保存

---

## 要約の内容

AIは以下の形式で要約します:

```markdown
## 概要
（全体の要約を2-3文で）

## 主要なポイント
- ポイント1
- ポイント2
- ポイント3

## 課題と解決策
- 課題: XXX → 解決策: YYY

## アクションアイテム
- [ ] タスク1
- [ ] タスク2

## キーワード
[[キーワード1]] [[キーワード2]] [[キーワード3]]
```

### 自動でObsidianリンクが付く

重要なキーワードには自動的に`[[キーワード]]`形式のリンクが付きます。

例:
- `[[ターゲット市場]]`
- `[[競合優位性]]`
- `[[収益モデル]]`
- `[[MVP]]`

Obsidianで開いた時、これらのリンクをクリックするとキーワードのページに移動できます。

---

## ボタンの説明

### 「AIで要約して保存」ボタン
- **場所**: オプションメニュー内
- **色**: 青
- **動作**: AIで会話を要約してObsidianに保存

### 「Markdownファイルをダウンロード」ボタン
- **場所**: オプションメニュー内
- **色**: 白（枠線）
- **動作**: 要約せずにそのままMarkdownファイルとしてダウンロード

### 「キャンセル」ボタン
- **場所**: 要約確認ダイアログ内
- **色**: グレー
- **動作**: 要約処理をキャンセルして元に戻る

---

## トラブルシューティング

### Q: 要約が長すぎてObsidianに保存できない

**A**: 通常、要約は1000文字以内に収まるように設計されていますが、稀に超える場合があります。

**解決策**:
1. 「ダウンロード」ボタンをクリック
2. Markdownファイルとしてダウンロード
3. Obsidianに手動でインポート

---

### Q: 要約に失敗する

**A**: ネットワークエラーやAPI制限の可能性があります。

**解決策**:
1. エラーメッセージを確認
2. 「ダウンロード」オプションを使用
3. または後で再試行

---

### Q: 要約がうまくいかない（内容が不正確）

**A**: AIの要約は完璧ではありません。

**解決策**:
1. プレビューで内容を確認
2. 不正確な場合は「キャンセル」
3. 「ダウンロード」を選択して手動で編集
4. または会話を続けてから再度要約

---

### Q: デモモードで動作している

**A**: `[デモモード]`というプレフィックスが付いている場合、実際のAIではなくサンプルレスポンスが表示されています。

**解決策**:
1. `.env.local`を確認
2. `ANTHROPIC_API_KEY`が設定されているか確認
3. `DEMO_MODE=true`になっていないか確認
4. 開発サーバーを再起動

---

## ヒント＆ベストプラクティス

### 1. こまめに保存

長い会話になりそうな場合、途中で区切って保存することをお勧めします。

- 例: 1つのテーマが終わったら保存
- 例: 重要なアイデアが出たら保存

---

### 2. プレビューで確認

要約結果は必ずプレビューで確認してください。

- 重要なポイントが抜けていないか
- キーワードリンクが適切か
- 内容が正確か

---

### 3. キーワードを活用

要約に含まれるキーワードリンク`[[キーワード]]`を活用しましょう。

- Obsidianでキーワードのページを作成
- 関連する他のアイデアとリンク
- ナレッジベースを構築

---

### 4. 要約後に編集可能

Obsidianに保存した後、自由に編集できます。

- 不足しているポイントを追加
- 不要な部分を削除
- フォーマットを調整

---

## よくある使用例

### 例1: ブレインストーミング後の整理

**シナリオ**: 30分間、AIとビジネスアイデアについてブレストした。

**使い方**:
1. 会話終了後、「Obsidianに保存」をクリック
2. 要約確認ダイアログが表示される
3. 「AIで要約して保存」を選択
4. 要約された主要ポイントを確認
5. Obsidianに保存して整理

---

### 例2: 定期的なアイデア検討

**シナリオ**: 毎日10分、アイデアについて考える時間を作っている。

**使い方**:
1. 日々の会話を要約して保存
2. Obsidianで日付別に整理
3. 週末にまとめて見直す
4. キーワードリンクで関連アイデアを発見

---

### 例3: プレゼン資料の下書き作成

**シナリオ**: アイデアをプレゼンする必要がある。

**使い方**:
1. AIと会話しながらアイデアを整理
2. 要約機能で構造化された要約を生成
3. 「主要なポイント」をスライドのアウトラインに使用
4. 「アクションアイテム」を実行計画に使用

---

## 技術的な情報

### 使用しているAIモデル
- **Claude Sonnet 4.5**
- 要約タスクに最適化されたモデル
- コストと品質のバランスが良い

### 文字数制限
- **入力**: 制限なし（ただし長すぎると処理時間が増加）
- **出力**: 1000文字以内を目標
- **URI制限**: Obsidian Advanced URIの制限に依存

### プライバシー
- 会話内容はAnthropic Claude APIに送信されます
- Anthropicのプライバシーポリシーに従います
- ローカルには保存されません（Obsidianに保存後はローカル）

---

## サポート

### 問題が発生した場合

1. エラーメッセージをスクリーンショット
2. どの操作で問題が起きたか記録
3. 開発者に報告

### フィードバック

- 要約の品質についての意見
- UIの改善提案
- 新機能のアイデア

お気軽にフィードバックをお送りください！

---

**最終更新**: 2026-01-15
**バージョン**: 1.0.0
